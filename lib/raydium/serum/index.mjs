import{PublicKey as n}from"@solana/web3.js";var N=new n("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),q=new n("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),F=new n("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),H=new n("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),W=new n("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),x=new n("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),Q=new n("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),j=new n("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),z=new n("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Y=new n("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),J=new n("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),X=new n("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),Z=new n("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),$=new n("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),ee=new n("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),te=new n("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),re=new n("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),ne=new n("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),oe=new n("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),se=new n("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2");var L={[x.toBase58()]:3},_={3:x};import{PublicKey as V}from"@solana/web3.js";import h,{isBN as yt}from"bn.js";import{bits as pe,BitStructure as ye,blob as v,Blob as Pe,cstr as de,f32 as xe,f32be as fe,f64 as ge,f64be as be,greedy as le,Layout as C,ns64 as me,ns64be as Le,nu64 as _e,nu64be as Te,offset as he,s16 as Se,s16be as we,s24 as Me,s24be as Ae,s32 as Be,s32be as Re,s40 as Ee,s40be as Ue,s48 as ve,s48be as Ce,s8 as Oe,seq as Ve,struct as De,Structure as O,u16 as ke,u16be as Ie,u24 as Ke,u24be as Ge,u32 as Ne,u32be as qe,u40 as Fe,u40be as He,u48 as We,u48be as Qe,u8 as je,UInt as ze,union as Ye,Union as Je,unionLayoutDiscriminator as Xe,utf8 as Ze}from"@solana/buffer-layout";var f=C,T=O;var p=v;var g=class extends f{constructor(t,r,o){super(t,o);this.blob=p(t),this.signed=r}decode(t,r=0){let o=new h(this.blob.decode(t,r),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(t,r,o=0){return typeof t=="number"&&(t=new h(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,o)}};function u(s){return new g(8,!1,s)}var b=class extends f{constructor(t,r,o,y){super(t.span,y);this.layout=t,this.decoder=r,this.encoder=o}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,o){return this.layout.encode(this.encoder(t),r,o)}getSpan(t,r){return this.layout.getSpan(t,r)}};function a(s){return new b(p(32),e=>new V(e),e=>e.toBuffer(),s)}var l=class extends T{decode(e,t){return super.decode(e,t)}};function S(s,e,t){return new l(s,e,t)}var D=S([p(5),p(8),a("ownAddress"),u("vaultSignerNonce"),a("baseMint"),a("quoteMint"),a("baseVault"),u("baseDepositsTotal"),u("baseFeesAccrued"),a("quoteVault"),u("quoteDepositsTotal"),u("quoteFeesAccrued"),u("quoteDustThreshold"),a("requestQueue"),a("eventQueue"),a("bids"),a("asks"),u("baseLotSize"),u("quoteLotSize"),u("feeRateBps"),u("referrerRebatesAccrued"),p(7)]),w={3:D};import{PublicKey as E}from"@solana/web3.js";import{get as M,set as k}from"lodash";import B from"dayjs";import I from"dayjs/plugin/utc";B.extend(I);var m=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return B().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},A={},K={};function R(s){let e=M(A,s);if(!e){let t=M(K,s);e=new m({name:s,logLevel:t}),k(A,s,e)}return e}var d=R("Serum"),U=class{static getProgramId(e){let t=_[e];return t||d.logWithError("invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),r=L[t];return r||d.logWithError("invalid program id","programId",t),r}static getStateLayout(e){let t=w[e];return t||d.logWithError(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let r=[t.toBuffer()],o=0,y;for(;o<100;){try{let P=r.concat(Buffer.from([o]),Buffer.alloc(7));y=E.createProgramAddressSync(P,e)}catch(P){if(P instanceof TypeError)throw P;o++;continue}return{publicKey:y,nonce:o}}return d.logWithError("unable to find a viable program address nonce","params",{programId:e,marketId:t}),{publicKey:E.default,nonce:o}}};export{D as MARKET_STATE_LAYOUT_V3,w as MARKET_VERSION_TO_STATE_LAYOUT,U as Market,L as SERUM_PROGRAMID_TO_VERSION,_ as SERUM_VERSION_TO_PROGRAMID};
//# sourceMappingURL=index.mjs.map