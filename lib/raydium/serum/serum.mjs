import{PublicKey as E}from"@solana/web3.js";import{get as L,set as v}from"lodash";import T from"dayjs";import C from"dayjs/plugin/utc";T.extend(C);var x=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return T().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},_={},O={};function h(s){let e=L(_,s);if(!e){let t=L(O,s);e=new x({name:s,logLevel:t}),v(_,s,e)}return e}import{PublicKey as n}from"@solana/web3.js";var W=new n("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Q=new n("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),j=new n("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),z=new n("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Y=new n("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),f=new n("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),J=new n("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),X=new n("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),Z=new n("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),$=new n("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),ee=new n("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),te=new n("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),re=new n("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),ne=new n("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),oe=new n("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),se=new n("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),ue=new n("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),ae=new n("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),ie=new n("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),ce=new n("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2");var S={[f.toBase58()]:3},w={3:f};import{PublicKey as I}from"@solana/web3.js";import A,{isBN as ft}from"bn.js";import{bits as xe,BitStructure as fe,blob as V,Blob as ge,cstr as be,f32 as le,f32be as me,f64 as Le,f64be as _e,greedy as Te,Layout as D,ns64 as he,ns64be as Se,nu64 as we,nu64be as Me,offset as Ae,s16 as Be,s16be as Re,s24 as Ee,s24be as Ue,s32 as ve,s32be as Ce,s40 as Oe,s40be as Ve,s48 as De,s48be as ke,s8 as Ie,seq as Ke,struct as Ge,Structure as k,u16 as Ne,u16be as qe,u24 as Fe,u24be as He,u32 as We,u32be as Qe,u40 as je,u40be as ze,u48 as Ye,u48be as Je,u8 as Xe,UInt as Ze,union as $e,Union as et,unionLayoutDiscriminator as tt,utf8 as rt}from"@solana/buffer-layout";var g=D,M=k;var i=V;var b=class extends g{constructor(t,r,o){super(t,o);this.blob=i(t),this.signed=r}decode(t,r=0){let o=new A(this.blob.decode(t,r),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(t,r,o=0){return typeof t=="number"&&(t=new A(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,o)}};function u(s){return new b(8,!1,s)}var l=class extends g{constructor(t,r,o,p){super(t.span,p);this.layout=t,this.decoder=r,this.encoder=o}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,o){return this.layout.encode(this.encoder(t),r,o)}getSpan(t,r){return this.layout.getSpan(t,r)}};function a(s){return new l(i(32),e=>new I(e),e=>e.toBuffer(),s)}var m=class extends M{decode(e,t){return super.decode(e,t)}};function B(s,e,t){return new m(s,e,t)}var K=B([i(5),i(8),a("ownAddress"),u("vaultSignerNonce"),a("baseMint"),a("quoteMint"),a("baseVault"),u("baseDepositsTotal"),u("baseFeesAccrued"),a("quoteVault"),u("quoteDepositsTotal"),u("quoteFeesAccrued"),u("quoteDustThreshold"),a("requestQueue"),a("eventQueue"),a("bids"),a("asks"),u("baseLotSize"),u("quoteLotSize"),u("feeRateBps"),u("referrerRebatesAccrued"),i(7)]),R={3:K};var d=h("Serum"),U=class{static getProgramId(e){let t=w[e];return t||d.logWithError("invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),r=S[t];return r||d.logWithError("invalid program id","programId",t),r}static getStateLayout(e){let t=R[e];return t||d.logWithError(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let r=[t.toBuffer()],o=0,p;for(;o<100;){try{let P=r.concat(Buffer.from([o]),Buffer.alloc(7));p=E.createProgramAddressSync(P,e)}catch(P){if(P instanceof TypeError)throw P;o++;continue}return{publicKey:p,nonce:o}}return d.logWithError("unable to find a viable program address nonce","params",{programId:e,marketId:t}),{publicKey:E.default,nonce:o}}};export{U as Market};
//# sourceMappingURL=serum.mjs.map