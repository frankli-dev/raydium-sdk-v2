var I=Object.create;var x=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty;var F=(n,e)=>{for(var t in e)x(n,t,{get:e[t],enumerable:!0})},E=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of G(e))!q.call(n,s)&&s!==t&&x(n,s,{get:()=>e[s],enumerable:!(o=K(e,s))||o.enumerable});return n};var b=(n,e,t)=>(t=n!=null?I(N(n)):{},E(e||!n||!n.__esModule?x(t,"default",{value:n,enumerable:!0}):t,n)),H=n=>E(x({},"__esModule",{value:!0}),n);var Q={};F(Q,{MARKET_STATE_LAYOUT_V3:()=>O,MARKET_VERSION_TO_STATE_LAYOUT:()=>w,Market:()=>R,SERUM_PROGRAMID_TO_VERSION:()=>m,SERUM_VERSION_TO_PROGRAMID:()=>L});module.exports=H(Q);var u=require("@solana/web3.js"),z=new u.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),Y=new u.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),J=new u.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),X=new u.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),Z=new u.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),l=new u.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),$=new u.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),ee=new u.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),te=new u.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),re=new u.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS"),ne=new u.PublicKey("6FJon3QE27qgPVggARueB22hLvoh22VzJpXv4rBEoSLF"),oe=new u.PublicKey("CC12se5To1CdEuw7fDS27B7Geo5jJyL7t5UK2B44NgiH"),se=new u.PublicKey("9HzJyW1qZsEiSfMUf6L2jo3CcTKAyBmSyKdwQeYisHrC"),ue=new u.PublicKey("DropEU8AvevN3UrXWXTMuz3rqnMczQVNjq3kcSdW2SQi"),ae=new u.PublicKey("CPMMoo8L3F4NbTegBCKVNunggL7H1ZpdTHKxQB5qKP1C"),ie=new u.PublicKey("GpMZbSM2GgvTKHJirzeGfMFoaZ8UR2X7F4v8vHTvxFbL"),ce=new u.PublicKey("DNXgeM9EiiaAbaWvwjHj9fQQLAX5ZsfHyvmYUNRAdNC8"),pe=new u.PublicKey("CPMDWBwJDtYax9qW7AyRuVC19Cc4L4Vcy4n2BHAbHkCW"),ye=new u.PublicKey("7rQ1QFNosMkUCuh7Z7fPbTHvh73b68sQYdirycEzJVuw"),Pe=new u.PublicKey("G11FKBRaAkHAKuLCgLM6K6NUc9rTjPAznRCjZifrTQe2");var m={[l.toBase58()]:3},L={3:l};var v=require("@solana/web3.js"),f=b(require("bn.js"));var r=require("@solana/buffer-layout"),_=r.Layout,U=r.Structure;var p=r.blob;var T=class extends _{constructor(t,o,s){super(t,s);this.blob=p(t),this.signed=o}decode(t,o=0){let s=new f.default(this.blob.decode(t,o),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(t,o,s=0){return typeof t=="number"&&(t=new f.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,s)}};function a(n){return new T(8,!1,n)}var h=class extends _{constructor(t,o,s,P){super(t.span,P);this.layout=t,this.decoder=o,this.encoder=s}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,s){return this.layout.encode(this.encoder(t),o,s)}getSpan(t,o){return this.layout.getSpan(t,o)}};function i(n){return new h(p(32),e=>new v.PublicKey(e),e=>e.toBuffer(),n)}var S=class extends U{decode(e,t){return super.decode(e,t)}};function C(n,e,t){return new S(n,e,t)}var O=C([p(5),p(8),i("ownAddress"),a("vaultSignerNonce"),i("baseMint"),i("quoteMint"),i("baseVault"),a("baseDepositsTotal"),a("baseFeesAccrued"),i("quoteVault"),a("quoteDepositsTotal"),a("quoteFeesAccrued"),a("quoteDustThreshold"),i("requestQueue"),i("eventQueue"),i("bids"),i("asks"),a("baseLotSize"),a("quoteLotSize"),a("feeRateBps"),a("referrerRebatesAccrued"),p(7)]),w={3:O};var B=require("@solana/web3.js");var y=require("lodash"),A=b(require("dayjs")),D=b(require("dayjs/plugin/utc"));A.default.extend(D.default);var M=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,A.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},V={},W={};function k(n){let e=(0,y.get)(V,n);if(!e){let t=(0,y.get)(W,n);e=new M({name:n,logLevel:t}),(0,y.set)(V,n,e)}return e}var g=k("Serum"),R=class{static getProgramId(e){let t=L[e];return t||g.logWithError("invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),o=m[t];return o||g.logWithError("invalid program id","programId",t),o}static getStateLayout(e){let t=w[e];return t||g.logWithError(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let o=[t.toBuffer()],s=0,P;for(;s<100;){try{let d=o.concat(Buffer.from([s]),Buffer.alloc(7));P=B.PublicKey.createProgramAddressSync(d,e)}catch(d){if(d instanceof TypeError)throw d;s++;continue}return{publicKey:P,nonce:s}}return g.logWithError("unable to find a viable program address nonce","params",{programId:e,marketId:t}),{publicKey:B.PublicKey.default,nonce:s}}};0&&(module.exports={MARKET_STATE_LAYOUT_V3,MARKET_VERSION_TO_STATE_LAYOUT,Market,SERUM_PROGRAMID_TO_VERSION,SERUM_VERSION_TO_PROGRAMID});
//# sourceMappingURL=index.js.map